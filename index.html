<!DOCTYPE html>
<html>
  <head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PEM3GH50WM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PEM3GH50WM');
</script>
    <title>AniCard</title>
    <meta property="og:image" content="https://raw.githubusercontent.com/Kiriyako/anicard/main/img/preview.png">
    <link href="img/favicon.ico" rel="icon" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">  </head>
    <link rel="stylesheet" href="CSS/style.css">
  </head>
  <body>
    <h3>Login with AniList feature is under development and may not work.</h3> 
    <!-- Add the "Login With AniList" button to the page -->
    <button class="meh" id="login-button">Login With AniList</button> <p></p>

    <!-- Add a placeholder element for the greeting and username -->
    <div id="message"></div>

    <!-- Include the JavaScript code that handles the button click and initiates the OAuth flow -->
    <script>
      // Set up the OAuth client with the client ID and redirect URL
      const clientId = 10384;
      const clientSecret = '3oPjNUUvPS28t6zLMPbUtr3qrnKW57zevABy17zH';
      const redirectUrl = 'https://kiriyako.github.io/anicard';

      // Set up the button click event handler
      document.getElementById('login-button').addEventListener('click', function() {
        // Redirect the user to the AniList OAuth authorization page
        window.location = `https://anilist.co/api/v2/oauth/authorize?client_id=${clientId}&response_type=code&redirect_uri=${redirectUrl}`;
      });

      // Check for the presence of an authorization code in the URL query string
      const code = new URLSearchParams(window.location.search).get('code');
      if (code) {
        // Exchange the authorization code for an access token
        fetch('https://anilist.co/api/v2/oauth/token', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            grant_type: 'authorization_code',
            client_id: clientId,
            client_secret: clientSecret,
            redirect_uri: redirectUrl,
            code: code,
          }),
        })
          .then(response => response.json())
          .then(result => {
            // If the access token was successfully retrieved, use it to make an API call to get the user's profile data
            if (result.access_token) {
              fetch('https://anilist.co/api/v2/user', {
                headers: {
                  'Content-Type': 'application/json',
                  Authorization: `Bearer ${result.access_token}`,
                },
              })
                .then(response => response.json())
                .then(user => {
                  // Display the greeting and username
                  document.getElementById('message').innerHTML = `Hello, ${user.name}!`;
                });
            } else {
              // An error occurred, display an appropriate message
              document.getElementById('message').innerHTML = `Error: ${result.error}`;
            }
          });
      }
    </script>
    <div class="header">
      <a href="https://kiriyako.github.io/anicard/"><img src="img/logo.png" alt="AniCard" width="380" height="70" ></a>
        <div class="footer">
    <form>
      <script>
        var today = new Date();
var hourNow = today.getHours();
var greeting; 
if (hourNow > 18) {
  greeting = 'Good evening!';
} else if (hourNow > 12) {
  greeting = 'Good afternoon!';
} else if (hourNow > 0) {
  greeting = 'Good morning!';
} else {
  greeting = 'Welcome!';
}
document.write('<h3>' + greeting + " " + "What do you want to do?" + '</h3>');
      </script>
      <h3>  <a href="https://kiriyako.github.io/anicard/"> Home </a> &nbsp; | &nbsp; <div class="dropdown">
        <button type='button' class="dropbtn">Browse</button>
        <div class="dropdown-content">
          <a href="anime-search">Anime</a>
          <a href="manga">Manga</a>
          <a href="character-search">Characters</a>
          <a href="people-search"> People </a>
          <a href="current">This Season</a>
        </div>
      </div> &nbsp; |&nbsp;<a href="season-search"> Season Search </a> &nbsp;| &nbsp; <a href="top">  Top Anime </a>&nbsp; | &nbsp; <a href="airing-today"> Airing Today &nbsp;| &nbsp; <a href="anime-info"> Anime Info (Full) &nbsp;| &nbsp; <a href="random"> Random Anime  </a>   <p></p>          <div id="anime-data">

     <h3> A recommendation for you: </h3>
     <h4> Want something musical? This one is for you! </h4>
     Bocchi The Rock! (ぼっち・ざ・ろっく) <BR>
     Fall 2022 <br>
<br>
  <img height= 400 width = 280 src ="https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx130003-5Y8rYzg982sq.png  "> <br>
  <br>
  <video width="500" height="300" controls autoplay muted>
    <source src="https://v.animethemes.moe/BocchiTheRock-OP1.webm" controls preload="none" type="video/mp4"> </video> <p></p>
    <text> Just see how good the opening is!</text>
  <P></P>
<hr>
  Yeah that's all. (POV: You suck at generating content) <p></p>

  Also try <a href="trace/index.html">AniCard Trace</a><br>
  <br>
  <text>Version 3.0.0 | <a href="docs/index"> Documentation </a>| <a href="history"> Release History </a>|<a href="docs/privacy-policy"> Privacy Policy </a> | <a href="docs/terms-and-conditions">Terms and Conditions </a> | <a href="https://github.com/Kiriyako/anicard/">Source Code  </a> </text>
</div>

Note: AniCard does NOT store any files on its servers. All content is provided by third-party services.
</body>

  </html>

